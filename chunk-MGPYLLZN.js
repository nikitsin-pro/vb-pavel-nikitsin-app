import{a as se}from"./chunk-P7WAMOVV.js";import{$ as X,B as W,I as Y,K as B,L as f,La as ne,M as b,N as G,O as y,Oa as oe,P as J,Q,R as h,Sa as re,Ta as ae,Z as E,_ as l,a as g,ba as Z,c as z,ca as V,d as A,e as R,ea as ee,g as I,h as _,ha as x,i as j,ia as a,j as F,ja as p,k as L,ka as M,l as q,la as te,m as $,ma as s,n as H,na as S,o as k,oa as O,q as D,qa as T,r as N,v as K,wa as C,y as U,ya as ie}from"./chunk-EVQQARIZ.js";function fe(){return n=>new A(t=>{let o,e,i=new z;return i.add(n.subscribe({complete:()=>{o&&t.next(e),t.complete()},error:r=>{t.error(r)},next:r=>{e=r,o||(o=_.schedule(()=>{t.next(e),o=void 0}),i.add(o))}})),i})}function ce(n){return typeof n.ngrxOnStoreInit=="function"}function le(n){return typeof n.ngrxOnStateInit=="function"}var he=new J("@ngrx/component-store Initial State"),me=(()=>{let t=class t{constructor(e){this.destroySubject$=new I(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new I(1),this.isInitialized=!1,this.state$=this.select(i=>i),this.state=ae(this.stateSubject$.pipe(f(this.destroy$)),{requireSync:!1,manualCleanup:!0}),this.\u0275hasProvider=!1,e&&this.initState(e),this.checkProviderForHooks()}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return i=>{let r=!0,c,u=(k(i)?i:$(i)).pipe(L(j),b(()=>this.assertStateIsInitialized()),G(this.stateSubject$),D(([m,w])=>e(w,m)),b(m=>this.stateSubject$.next(m)),K(m=>r?(c=m,F):H(m)),f(this.destroy$)).subscribe();if(c)throw c;return r=!1,u}}initState(e){q([e],j).subscribe(i=>{this.isInitialized=!0,this.stateSubject$.next(i)})}setState(e){typeof e!="function"?this.initState(e):this.updater(e)()}patchState(e){let i=typeof e=="function"?e(this.get()):e;this.updater((r,c)=>g(g({},r),c))(i)}get(e){this.assertStateIsInitialized();let i;return this.stateSubject$.pipe(U(1)).subscribe(r=>{i=e?e(r):r}),i}select(...e){let{observablesOrSelectorsObject:i,projector:r,config:c}=ve(e);return(be(i,r)?this.stateSubject$:N(i)).pipe(c.debounce?fe():pe(),r?D(u=>i.length>0&&Array.isArray(u)?r(...u):r(u)):pe(),W(c.equal),Y({refCount:!0,bufferSize:1}),f(this.destroy$))}selectSignal(...e){let i=[...e],r=typeof i[e.length-1]=="object"?i.pop():{},c=i.pop(),d=i,u=d.length===0?()=>c(this.state()):()=>{let m=d.map(w=>w());return c(...m)};return C(u,r)}effect(e){let i=new R;return e(i).pipe(f(this.destroy$)).subscribe(),r=>(k(r)?r:$(r)).pipe(f(this.destroy$)).subscribe(d=>{i.next(d)})}checkProviderForHooks(){_.schedule(()=>{if(ie()&&(ce(this)||le(this))&&!this.\u0275hasProvider){let e=[ce(this)?"OnStoreInit":"",le(this)?"OnStateInit":""].filter(i=>i);console.warn(`@ngrx/component-store: ${this.constructor.name} has the ${e.join(" and ")} lifecycle hook(s) implemented without being provided using the provideComponentStore(${this.constructor.name}) function. To resolve this, provide the component store via provideComponentStore(${this.constructor.name})`)}})}assertStateIsInitialized(){if(!this.isInitialized)throw new Error(`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`)}};t.\u0275fac=function(i){return new(i||t)(Q(he,8))},t.\u0275prov=y({token:t,factory:t.\u0275fac});let n=t;return n})();function ve(n){let t=Array.from(n),e={debounce:!1,equal:(c,d)=>c===d};if(ge(t[t.length-1])&&(e=g(g({},e),t.pop())),t.length===1&&typeof t[0]!="function")return{observablesOrSelectorsObject:t[0],projector:void 0,config:e};let i=t.pop();return{observablesOrSelectorsObject:t,projector:i,config:e}}function ge(n){let t=n;return typeof t.debounce<"u"||typeof t.equal<"u"}function be(n,t){return Array.isArray(n)&&n.length===0&&t}function pe(){return n=>n}var v=class n extends me{api=h(se);constructor(){super({movie:null,loading:!1,error:!1})}loadMovie=this.effect(t=>t.pipe(B(o=>(this.patchState({loading:!0,error:!1}),this.api.loadMovieDetails(o).pipe(b({next:e=>this.patchState({movie:e,loading:!1,error:!1}),error:()=>this.patchState({movie:null,loading:!1,error:!0})}))))));static \u0275fac=function(o){return new(o||n)};static \u0275prov=y({token:n,factory:n.\u0275fac})};var ue=()=>["../"];function xe(n,t){n&1&&(a(0,"h1",3),s(1,"Loading..."),p())}function Se(n,t){n&1&&(a(0,"h1",4),s(1,"Something went wrong"),p())}function ye(n,t){if(n&1&&(a(0,"section",5)(1,"a",6),M(2,"img",7),p(),M(3,"img",8),a(4,"div",9)(5,"h2",10),s(6),p(),a(7,"p"),s(8,"Homepage: "),a(9,"a",11),s(10),p()(),a(11,"p"),s(12,"Status: "),a(13,"span"),s(14),p()(),a(15,"p"),s(16,"Release date: "),a(17,"span"),s(18),p()(),a(19,"p"),s(20,"Rating: "),a(21,"span"),s(22),p()(),a(23,"p"),s(24,"Runtime: "),a(25,"span"),s(26),p()()()(),a(27,"section",12)(28,"h2",13),s(29,"Overview"),p(),a(30,"p"),s(31),p()()),n&2){let o=te();l(),x("routerLink",T(13,ue))("relativeTo",o.route),l(2),x("src","https://image.tmdb.org/t/p/w154/"+o.movie().poster_path,E)("alt","Poster for "+o.movie().title),l(3),S(o.movie().title),l(3),x("href",o.movie().homepage,E),Z("aria-label","Visit homepage for "+o.movie().title),l(),O(" ",o.movie().homepage," "),l(4),S(o.movie().status),l(4),S(o.movie().release_date),l(4),O("",o.movie().vote_average.toFixed(1)," / 10"),l(4),O("",o.movie().runtime," min."),l(5),S(o.movie().overview)}}var P=class n{store=h(v);route=h(ne);id=C(()=>this.route.snapshot.paramMap.get("id"));movie=this.store.selectSignal(({movie:t})=>t);loading=this.store.selectSignal(({loading:t})=>t);error=this.store.selectSignal(({error:t})=>t);ngOnInit(){this.store.loadMovie(this.id())}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=X({type:n,selectors:[["app-movie-details-panel"]],decls:6,vars:4,consts:[["role","dialog","aria-modal","true","aria-labelledby","movie-title","aria-describedby","movie-overview",1,"overlay"],[1,"backdrop",3,"routerLink","relativeTo"],[1,"sidepanel"],["role","status","aria-live","polite",1,"placeholder-text"],["role","alert",1,"placeholder-text","alert"],[1,"main-info-container"],["aria-label","Close panel",1,"close-link",3,"routerLink","relativeTo"],["src","icons/close.svg","alt","close icon"],[1,"poster",3,"src","alt"],[1,"main-info"],["id","movie-title",1,"title"],["target","_blank","rel","noopener noreferrer",3,"href"],["id","movie-overview",1,"overview-container"],[1,"title"]],template:function(o,e){o&1&&(a(0,"div",0),M(1,"a",1),a(2,"aside",2),V(3,xe,2,0,"h1",3)(4,Se,2,0,"h1",4)(5,ye,32,14),p()()),o&2&&(l(),x("routerLink",T(3,ue))("relativeTo",e.route),l(2),ee(e.loading()?3:e.error()?4:e.movie()?5:-1))},dependencies:[re,oe],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;background:#0009}.backdrop[_ngcontent-%COMP%]{flex:1}.sidepanel[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;width:576px;max-width:100vw;background:var(--surface);border-top-left-radius:16px;border-bottom-left-radius:16px;padding:12px;box-sizing:border-box;overflow-y:auto}.main-info-container[_ngcontent-%COMP%]{position:relative;display:flex}.main-info-container[_ngcontent-%COMP%]   .close-link[_ngcontent-%COMP%]{position:absolute;top:4px;left:4px;display:flex;align-items:center;justify-content:center;width:24px;height:24px;background-color:#ffffff80;border-radius:50%;cursor:pointer}.main-info-container[_ngcontent-%COMP%]   .close-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px;height:16px;object-fit:cover}.main-info-container[_ngcontent-%COMP%]   img.poster[_ngcontent-%COMP%]{width:150px;height:230px;object-fit:cover;border-radius:8px;margin-right:16px}.main-info-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.main-info-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{overflow-wrap:anywhere}.main-info-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500}.main-info-container[_ngcontent-%COMP%]   .main-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px}.overview-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.title[_ngcontent-%COMP%]{font-weight:400}"]})};var Je=[{path:"",component:P,providers:[v]},{path:"**",redirectTo:""}];export{Je as movieDetailsRoutes};
